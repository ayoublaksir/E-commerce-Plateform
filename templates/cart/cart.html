 
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="max-age=604800" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="description" content="Bootstrap e-commerce html template similar to Alibaba">
<meta name="keywords" content="Online template, shop, theme, template, html, css, bootstrap 4">

<title>Website title - bootstrap alistyle html template</title>

<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>


<!-- jQuery -->
{% load static %}
<script src="{% static 'js/jquery-2.0.0.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/script.js' %}" type="text/javascript"></script>

<link href="{% static 'css/bootstrap.css' %}" rel="stylesheet" type="text/css"/>
<link href="{% static 'fonts/fontawesome/css/all.min.css' %}" type="text/css" rel="stylesheet">
<link href="{% static 'css/ui.css' %}" rel="stylesheet" type="text/css"/>
<link href="{% static 'css/responsive.css' %}" rel="stylesheet" type="text/css" />



</head>
<body>

<!-- REMOVE FOLLOWING LINK -->

<!-- REMOVE  //END -->


<header class="section-header">
<section class="header-main border-bottom">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-xl-2 col-lg-3 col-md-12">
				<a href="{% url 'home' %}" class="brand-wrap">
					
					<img class="logo" src="../../media/uploads/banners/logo.png" style="width: 150px; object-fit: cover;">
				
				</a> <!-- brand-wrap.// -->
			</div>
			<div class="col-xl-6 col-lg-5 col-md-6">
				<form action="{% url 'search' %}" class="search-header" method="GET">
					<div class="input-group w-100">
						<select class="custom-select border-right"  name="category_name">
								{% for category in all_category %}
								<option value={{category.title}} >{{category}}</option>
								{% endfor %}
						</select>
					    <input type="text" class="form-control" placeholder="Search" name="query">
					    
					    <div class="input-group-append">
					      <button class="btn btn-primary" type="submit">
					        <i class="fa fa-search"></i> Search
					      </button>
					    </div>
				    </div>
				</form> <!-- search-wrap .end// -->   
			</div> <!-- col.// -->
			<div class="col-xl-4 col-lg-4 col-md-6">
				<div class="widgets-wrap float-md-right">
					
				
					<div class="widget-header mr-3">
						<a href="{% url 'favorite' %}" class="widget-view">
							<div class="icon-area">
								<i class="fas fa-heart"></i>
							</div>
							<small class="text"> Favorites </small>
						</a>
					</div>
					<div class="widget-header mr-3">
						<a href="{% url 'orders' %}" class="widget-view">
							<div class="icon-area">
								<i class="fa fa-store"></i>
							</div>
							<small class="text"> Orders </small>
						</a>
					</div>
				
					
					
					<div class="widget-header">
						
						<a href="{%url 'cart'%}" class="widget-view">

							<div class="icon-area">
								<i class="fa fa-shopping-cart"></i>
							</div>
							<small class="text"> Cart </small>
						</a>
					</div>
				</div> <!-- widgets-wrap.// -->
			</div> <!-- col.// -->
		</div> <!-- row.// -->
	</div> <!-- container.// -->
</section> <!-- header-main .// -->



<nav class="navbar navbar-main navbar-expand-lg border-bottom">
<div class="container">
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav" aria-controls="main_nav" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="main_nav">
	<ul class="navbar-nav">
	
		<li class="nav-item">
			<a class="nav-link" href="{% url 'all_products' %}">Products</a>
		  </li>
		  {% if request.user.is_authenticated and user.is_client %}
		  <!-- <li class="nav-item">
			<a class="nav-link" href="{% url 'vendor_admin' %}">Vendor_admin</a>
		  </li> -->
		  <li class="nav-item">
			<a class="nav-link" href="{% url 'logout' %}">logout</a>
		  </li>
		  {% else %}
		  <li class="nav-item">
			<a class="nav-link" href="{% url 'become_vendor' %}">Become Vendor</a>
		  </li><li class="nav-item">
			<a class="nav-link" href="{% url 'become_client' %}">Become Client</a>
		  </li>
		</li><li class="nav-item">
			<a class="nav-link" href="{% url 'login' %}">Login</a>
		  </li>
		  {% endif %}
		  
		 
	</ul>
	
	</div> <!-- collapse .// -->
</div> <!-- container .// -->
</nav>

</header> <!-- section-header.// -->

<!-- ========================= SECTION CONTENT ========================= -->
<section class="section-content padding-y">
    <div class="container">
    
    <div class="row">
        <main class="col-md-9">
    <div class="card">
    
    <table class="table table-borderless table-shopping-cart">
    <thead class="text-muted">
    <tr class="small text-uppercase">
      <th scope="col">Product</th>
      <th scope="col" width="119" > <span class="mr-2">Quantity</span> </th>
      <th scope="col" width="120">Price</th>
      <th scope="col" class="text-right" width="200"> </th>
    </tr>
    </thead>
    <tbody>
    {% if cart %}
   {% for item in cart %}
   
    <tr>
        <td>
            <figure class="itemside d-flex align-items-center">
                {% if item.product.image %}
                <div class="aside"><img src={{item.product.image.url}} class="img-sm"></div>
                {% endif %}
                <figcaption class="info">
                    <a href="{% url 'detail' item.product.category.slug item.product.slug %}" class="title text-dark">{{item.product.title}} </a>
                    
                </figcaption>
            </figure>
        </td>
        <td class="itemside mt-4"  > 
            <div>
            {{item.quantity}}
            <div><a href="?change_quantity={{item.id}}&quantity=-1">-</a>
            <a href="?change_quantity={{item.id}}&quantity=+1">+</a>
        </div>
        </td>
        <td > 
            <div class="price-wrap mt-4"> 
                <var class="price">${{item.product.price}}</var> 
                <small class="text-muted"> ${{item.total_price}}</small> 
            </div> <!-- price-wrap .// -->
        </td>
        <td class="text-right "> 
            
            <a href="?remove_from_cart={{item.id}}" class="btn btn-light btn-round mt-4 "> Remove</a>
        </td>
       
    </tr>
    {% endfor %}
    {% endif %}
    </tbody>
    </table>
    
    <div class="card-body border-top">
        <a href="#" class="btn btn-primary float-md-right"> Make Purchase <i class="fa fa-chevron-right"></i> </a>
        <a href="#" class="btn btn-light"> <i class="fa fa-chevron-left"></i> Continue shopping </a>
    </div>	
    </div> <!-- card.// -->
    
    <div class="alert alert-success mt-3">
        <p class="icontext"><i class="icon text-success fa fa-truck"></i> Free Delivery within 1-2 weeks</p>
    </div>
    
        </main> <!-- col.// -->
        <aside class="col-md-3">
           <!-- card .// -->
            <div class="card">
                <div class="card-body">
                        
                        <dl class="dlist-align">
                          <dt>Total:</dt>
                          <dd class="text-right  h5"><strong>${{cart.get_total_cost}}</strong></dd>

                        </dl>
                        <div id="paypal-button-container"></div>
                        <hr>
                        <p class="text-center mb-3">
                            <img src="../../media/uploads/payments.png" height="26">
                        </p>
                        
                </div> <!-- card-body.// -->
            </div>  <!-- card .// -->
        </aside> <!-- col.// -->
    </div>
    
    </div> <!-- container .//  -->
    </section>
    <!-- ========================= SECTION CONTENT END// ========================= -->
    
    <!-- ========================= SECTION  ========================= -->
    <section class="section-name border-top padding-y">
    <div class="container">
    <h6>Payment and refund policy</h6>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    
    </div><!-- container // -->
    </section>
    <!-- ========================= SECTION  END// ========================= -->
    
    
    <!-- ========================= FOOTER ========================= -->
    <footer class="section-footer bg-secondary">
        <div class="container">
            <section class="footer-top padding-y-lg text-white">
                <div class="row">
                    <aside class="col-md col-6">
                        <h6 class="title">Brands</h6>
                        <ul class="list-unstyled">
                            <li> <a href="#">Adidas</a></li>
                            <li> <a href="#">Puma</a></li>
                            <li> <a href="#">Reebok</a></li>
                            <li> <a href="#">Nike</a></li>
                        </ul>
                    </aside>
                    <aside class="col-md col-6">
                        <h6 class="title">Company</h6>
                        <ul class="list-unstyled">
                            <li> <a href="#">About us</a></li>
                            <li> <a href="#">Career</a></li>
                            <li> <a href="#">Find a store</a></li>
                            <li> <a href="#">Rules and terms</a></li>
                            <li> <a href="#">Sitemap</a></li>
                        </ul>
                    </aside>
                    <aside class="col-md col-6">
                        <h6 class="title">Help</h6>
                        <ul class="list-unstyled">
                            <li> <a href="#">Contact us</a></li>
                            <li> <a href="#">Money refund</a></li>
                            <li> <a href="#">Order status</a></li>
                            <li> <a href="#">Shipping info</a></li>
                            <li> <a href="#">Open dispute</a></li>
                        </ul>
                    </aside>
                    <aside class="col-md col-6">
                        <h6 class="title">Account</h6>
                        <ul class="list-unstyled">
                            <li> <a href="#"> User Login </a></li>
                            <li> <a href="#"> User register </a></li>
                            <li> <a href="#"> Account Setting </a></li>
                            <li> <a href="#"> My Orders </a></li>
                        </ul>
                    </aside>
                    <aside class="col-md">
                        <h6 class="title">Social</h6>
                        <ul class="list-unstyled">
                            <li><a href="#"> <i class="fab fa-facebook"></i> Facebook </a></li>
                            <li><a href="#"> <i class="fab fa-twitter"></i> Twitter </a></li>
                            <li><a href="#"> <i class="fab fa-instagram"></i> Instagram </a></li>
                            <li><a href="#"> <i class="fab fa-youtube"></i> Youtube </a></li>
                        </ul>
                    </aside>
                </div> <!-- row.// -->
            </section>	<!-- footer-top.// -->
    
            <section class="footer-bottom text-center">
            
                    <p class="text-white">Privacy Policy - Terms of Use - User Information Legal Enquiry Guide</p>
                    <p class="text-muted"> &copy 2019 Company name, All rights reserved </p>
                    <br>
            </section>
        </div><!-- //container -->
    </footer>
    <!-- ========================= FOOTER END // ========================= -->
    
    

    
   

   <!-- Include the PayPal JavaScript SDK -->
   <script src="https://www.paypal.com/sdk/js?client-id=ARvCN_SZExlNh1LfYdDtTSGZ2D3MWWaI32FRJRMNtIMenNRZ23NgwdOjOQKn1dbysAtizAOndao3Od_e&currency=USD"></script>
   

   <script>
       function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
       var csrftoken = getCookie('csrftoken');
 
       var client= '{{client}}'
       var vendor='{{ vendor }}'
       var product='{{product}}'
       var quantity='{{quantity}}'
    
       console.log("{{vendor}}")
       console.log("{{product}}")
       console.log("{{client}}")
       console.log("{{quantity}}")
       
      
       
       
       

       function completeOrder(){
           var url= "{% url 'complete' %}"
           fetch(url, {
               method: 'POST',
               headers:{
                   'content-type':'application/json' ,
                   'X-CSRFToken':csrftoken,
               },
               body:JSON.stringify({'client':client,'vendor':vendor,'product':product,'quantity':quantity})
              
              

           })
       }
       // Render the PayPal button into #paypal-button-container
       paypal.Buttons({

           // Set up the transaction
           createOrder: function(data, actions) {
               return actions.order.create({
                   purchase_units: [{
                       amount: {
                           value: '{{cart.get_total_cost}}'
                       }
                   }]
               });
           },

           // Finalize the transaction
           onApprove: function(data, actions) {
               return actions.order.capture().then(function(details) {
                   completeOrder()
                   // Show a success message to the buyer
                   alert('Transaction completed by ' + details.payer.name.given_name + '!');
                   if (completeOrder()){
                        
                   }
               });
           }


       }).render('#paypal-button-container');

       
   </script>
   </body>
   </html>